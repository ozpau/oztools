# gh


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

To use this module you need to setup GitHub [personal access
token](https://docs.github.com/github/authenticating-to-github/creating-a-personal-access-token),
which is a secret code used to access your account.

If you don‚Äôt have one, [click
here](https://github.com/settings/tokens/new) to create one. You‚Äôll be
asked to enter a name ‚Äì choose anything you like, for instance
‚Äúoztools‚Äù. In ‚Äúscopes‚Äù choose ‚Äúrepo‚Äù, ‚Äúgist‚Äù, ‚Äúnotifications‚Äù, and
‚Äúworkflow‚Äù. Then clock ‚ÄúGenerate Token‚Äù and copy the token. Then add it
for example to your `.bashrc` as
`export GITHUB_TOKEN="<your github token goes here>"`.

``` python
warn("hello")
```

    /tmp/ipykernel_1295329/502382720.py:1: UserWarning: hello
      warn("hello")

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L28"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_token_and_username

>  get_token_and_username ()

``` python
import oztools
```

``` python
oztools?
```

    Type:        module
    String form: <module 'oztools' from '/home/mu/nbdev/oztools/oztools/__init__.py'>
    File:        ~/nbdev/oztools/oztools/__init__.py
    Docstring:   <no docstring>

``` python
gh_username
```

    'ozpau'

``` python
repo = api.repos.get('make_llm')
```

``` python
api.repos.get_latest_pages_build('make_llm')
```

    HTTP404NotFoundError: HTTP Error 404: Not Found
    ====Error Body====
    {
      "message": "Not Found",
      "documentation_url": "https://docs.github.com/rest/pages/pages#get-latest-pages-build",
      "status": "404"
    }

    [0;31m---------------------------------------------------------------------------[0m
    [0;31mHTTP404NotFoundError[0m                      Traceback (most recent call last)
    Cell [0;32mIn[16], line 1[0m
    [0;32m----> 1[0m [43mapi[49m[38;5;241;43m.[39;49m[43mrepos[49m[38;5;241;43m.[39;49m[43mget_latest_pages_build[49m[43m([49m[38;5;124;43m'[39;49m[38;5;124;43mmake_llm[39;49m[38;5;124;43m'[39;49m[43m)[49m

    File [0;32m~/python/venv/lib/python3.12/site-packages/ghapi/core.py:74[0m, in [0;36m_GhVerb.__call__[0;34m(self, headers, *args, **kwargs)[0m
    [1;32m     71[0m [38;5;28;01mfor[39;00m a,b [38;5;129;01min[39;00m [38;5;28mzip[39m(args,flds): kwargs[b][38;5;241m=[39ma
    [1;32m     72[0m route_p,query_p,data_p [38;5;241m=[39m [{p:kwargs[p] [38;5;28;01mfor[39;00m p [38;5;129;01min[39;00m o [38;5;28;01mif[39;00m p [38;5;129;01min[39;00m kwargs}
    [1;32m     73[0m                          [38;5;28;01mfor[39;00m o [38;5;129;01min[39;00m ([38;5;28mself[39m[38;5;241m.[39mroute_ps,[38;5;28mself[39m[38;5;241m.[39mparams,d)]
    [0;32m---> 74[0m [38;5;28;01mreturn[39;00m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mclient[49m[43m([49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mpath[49m[43m,[49m[43m [49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mverb[49m[43m,[49m[43m [49m[43mheaders[49m[38;5;241;43m=[39;49m[43mheaders[49m[43m,[49m[43m [49m[43mdecode[49m[38;5;241;43m=[39;49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mdecode[49m[43m,[49m[43m [49m[43mroute[49m[38;5;241;43m=[39;49m[43mroute_p[49m[43m,[49m[43m [49m[43mquery[49m[38;5;241;43m=[39;49m[43mquery_p[49m[43m,[49m[43m [49m[43mdata[49m[38;5;241;43m=[39;49m[43mdata_p[49m[43m)[49m

    File [0;32m~/python/venv/lib/python3.12/site-packages/ghapi/core.py:133[0m, in [0;36mGhApi.__call__[0;34m(self, path, verb, headers, route, query, data, timeout, decode)[0m
    [1;32m    131[0m return_json [38;5;241m=[39m ([38;5;124m'[39m[38;5;124mjson[39m[38;5;124m'[39m [38;5;129;01min[39;00m headers[[38;5;124m'[39m[38;5;124mAccept[39m[38;5;124m'[39m]) [38;5;129;01mand[39;00m (decode [38;5;129;01mis[39;00m [38;5;28;01mTrue[39;00m)
    [1;32m    132[0m debug [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mdebug [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39mdebug [38;5;28;01melse[39;00m print_summary [38;5;28;01mif[39;00m os[38;5;241m.[39mgetenv([38;5;124m'[39m[38;5;124mGHAPI_DEBUG[39m[38;5;124m'[39m) [38;5;28;01melse[39;00m [38;5;28;01mNone[39;00m
    [0;32m--> 133[0m res,[38;5;28mself[39m[38;5;241m.[39mrecv_hdrs [38;5;241m=[39m [43murlsend[49m[43m([49m[43mpath[49m[43m,[49m[43m [49m[43mverb[49m[43m,[49m[43m [49m[43mheaders[49m[38;5;241;43m=[39;49m[43mheaders[49m[43m [49m[38;5;129;43;01mor[39;49;00m[43m [49m[38;5;28;43;01mNone[39;49;00m[43m,[49m[43m [49m[43mdecode[49m[38;5;241;43m=[39;49m[43mdecode[49m[43m,[49m[43m [49m[43mdebug[49m[38;5;241;43m=[39;49m[43mdebug[49m[43m,[49m[43m [49m[43mreturn_headers[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m,[49m
    [1;32m    134[0m [43m                             [49m[43mroute[49m[38;5;241;43m=[39;49m[43mroute[49m[43m [49m[38;5;129;43;01mor[39;49;00m[43m [49m[38;5;28;43;01mNone[39;49;00m[43m,[49m[43m [49m[43mquery[49m[38;5;241;43m=[39;49m[43mquery[49m[43m [49m[38;5;129;43;01mor[39;49;00m[43m [49m[38;5;28;43;01mNone[39;49;00m[43m,[49m[43m [49m[43mdata[49m[38;5;241;43m=[39;49m[43mdata[49m[43m [49m[38;5;129;43;01mor[39;49;00m[43m [49m[38;5;28;43;01mNone[39;49;00m[43m,[49m[43m [49m[43mreturn_json[49m[38;5;241;43m=[39;49m[43mreturn_json[49m[43m,[49m[43m [49m[43mtimeout[49m[38;5;241;43m=[39;49m[43mtimeout[49m[43m)[49m
    [1;32m    135[0m [38;5;28;01mif[39;00m [38;5;124m'[39m[38;5;124mX-RateLimit-Remaining[39m[38;5;124m'[39m [38;5;129;01min[39;00m [38;5;28mself[39m[38;5;241m.[39mrecv_hdrs:
    [1;32m    136[0m     newlim [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mrecv_hdrs[[38;5;124m'[39m[38;5;124mX-RateLimit-Remaining[39m[38;5;124m'[39m]

    File [0;32m~/python/venv/lib/python3.12/site-packages/fastcore/net.py:221[0m, in [0;36murlsend[0;34m(url, verb, headers, decode, route, query, data, json_data, return_json, return_headers, debug, timeout)[0m
    [1;32m    218[0m [38;5;28;01mif[39;00m route [38;5;129;01mand[39;00m route[38;5;241m.[39mget([38;5;124m'[39m[38;5;124marchive_format[39m[38;5;124m'[39m, [38;5;28;01mNone[39;00m):
    [1;32m    219[0m     [38;5;28;01mreturn[39;00m urlread(req, decode[38;5;241m=[39m[38;5;28;01mFalse[39;00m, return_json[38;5;241m=[39m[38;5;28;01mFalse[39;00m, return_headers[38;5;241m=[39mreturn_headers, timeout[38;5;241m=[39mtimeout)
    [0;32m--> 221[0m [38;5;28;01mreturn[39;00m [43murlread[49m[43m([49m[43mreq[49m[43m,[49m[43m [49m[43mdecode[49m[38;5;241;43m=[39;49m[43mdecode[49m[43m,[49m[43m [49m[43mreturn_json[49m[38;5;241;43m=[39;49m[43mreturn_json[49m[43m,[49m[43m [49m[43mreturn_headers[49m[38;5;241;43m=[39;49m[43mreturn_headers[49m[43m,[49m[43m [49m[43mtimeout[49m[38;5;241;43m=[39;49m[43mtimeout[49m[43m)[49m

    File [0;32m~/python/venv/lib/python3.12/site-packages/fastcore/net.py:122[0m, in [0;36murlread[0;34m(url, data, headers, decode, return_json, return_headers, timeout, **kwargs)[0m
    [1;32m    120[0m     [38;5;28;01mwith[39;00m urlopen(url, data[38;5;241m=[39mdata, headers[38;5;241m=[39mheaders, timeout[38;5;241m=[39mtimeout, [38;5;241m*[39m[38;5;241m*[39mkwargs) [38;5;28;01mas[39;00m u: res,hdrs [38;5;241m=[39m u[38;5;241m.[39mread(),u[38;5;241m.[39mheaders
    [1;32m    121[0m [38;5;28;01mexcept[39;00m HTTPError [38;5;28;01mas[39;00m e:
    [0;32m--> 122[0m     [38;5;28;01mif[39;00m [38;5;241m400[39m [38;5;241m<[39m[38;5;241m=[39m e[38;5;241m.[39mcode [38;5;241m<[39m [38;5;241m500[39m: [38;5;28;01mraise[39;00m ExceptionsHTTP[e[38;5;241m.[39mcode](e[38;5;241m.[39murl, e[38;5;241m.[39mhdrs, e[38;5;241m.[39mfp, msg[38;5;241m=[39me[38;5;241m.[39mmsg) [38;5;28;01mfrom[39;00m [38;5;28;01mNone[39;00m
    [1;32m    123[0m     [38;5;28;01melse[39;00m: [38;5;28;01mraise[39;00m
    [1;32m    125[0m [38;5;28;01mif[39;00m decode: res [38;5;241m=[39m res[38;5;241m.[39mdecode()

    [0;31mHTTP404NotFoundError[0m: HTTP Error 404: Not Found
    ====Error Body====
    {
      "message": "Not Found",
      "documentation_url": "https://docs.github.com/rest/pages/pages#get-latest-pages-build",
      "status": "404"
    }

``` python
repo.branches_url
```

    'https://api.github.com/repos/ozpau/make_llm/branches{/branch}'

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L47"
target="_blank" style="float:right; font-size:smaller">source</a>

### gh_licenses

>  gh_licenses ()

*List GitHub license templates*

TODO: It would be nice if `@call_parse` created not just a cli wrapper,
but also a raw function

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L54"
target="_blank" style="float:right; font-size:smaller">source</a>

### gh_new_repo_fn

>  gh_new_repo_fn (name, description, license, private)

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L61"
target="_blank" style="float:right; font-size:smaller">source</a>

### gh_new_repo

>  gh_new_repo (name:str, description:str, license:str='Apache-2.0',
>                   private:bool=False)

*Create a new github repo and clone it*

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L66"
target="_blank" style="float:right; font-size:smaller">source</a>

### commit_and_push

>  commit_and_push (repo:git.repo.base.Repo, msg:str)

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>repo</td>
<td>Repo</td>
<td>Repo to commit and push</td>
</tr>
<tr>
<td>msg</td>
<td>str</td>
<td>Commit message</td>
</tr>
</tbody>
</table>

``` python
#gh_new_repo("cadlab", "CAD tools for Jupyter notebooks")
```

``` python
Path().cwd()
```

    Path('/home/mu/nbdev/oztools/nbs/api')

``` python
#from nbdev.cli import *
```

``` python
#nbdev_new()
```

``` python
#api.repos.list_for_org("")
```

``` python
gh_repo = api.repos.get("ozpau.github.io")
```

``` python
local_repo = Repo('../..')
```

``` python
#head = local_repo.create_head('gh-pages')
#local_repo.git.push('--set-upstream', 'origin', head)
```

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L75"
target="_blank" style="float:right; font-size:smaller">source</a>

### add_new_branch

>  add_new_branch (repo:git.repo.base.Repo, branch_name:str)

*Create new branch and push it to upstream*

Note that we need to split setting up branch in two parts so that if we
decide to commit something after setting up gh-pages branch, it won‚Äôt
interrupt page deployment.

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L84"
target="_blank" style="float:right; font-size:smaller">source</a>

### setup_pages_branch_location

>  setup_pages_branch_location (local_repo:git.repo.base.Repo,
>                                   repo_name:str)

------------------------------------------------------------------------

<a
href="https://github.com/ozellpaukert/oztools/blob/main/oztools/gh.py#L81"
target="_blank" style="float:right; font-size:smaller">source</a>

### setup_pages_branch

>  setup_pages_branch (local_repo:git.repo.base.Repo, repo_name:str)
